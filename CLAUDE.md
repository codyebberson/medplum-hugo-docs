# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Medplum documentation site built with Hugo, migrated from Docusaurus. Healthcare developer documentation portal using Go templates, SCSS, and ES module JavaScript.

## Commands

- **Dev server**: `npm run dev` (starts Hugo server on localhost:1313 with drafts/future content)
- **Production build**: `npm run build` (cleans `public/`, builds with minification)
- **Preview build**: `npm run preview` (serves `public/` via http-server)
- **px→rem conversion**: `npm run pxtorem` (converts px to rem in SCSS files via PostCSS)

No test or lint commands are configured.

## Architecture

### Hugo Templating

- `layouts/_default/baseof.html` — Base HTML template. Conditionally shows sidebar for `docs` section. Uses Swup (`#swup`) for SPA-like page transitions.
- `layouts/_default/single.html` and `list.html` — Page layouts extending baseof via `{{ block "main" }}`.
- `layouts/partials/` — Reusable template fragments (navbar, sidebar, breadcrumbs, footer, etc.).
- `layouts/shortcodes/` — 14+ Hugo shortcodes usable in markdown (hero, feature, feature-grid, card, alert, testimonial, etc.).
- `layouts/_markup/render-codeblock-mermaid.html` — Custom Mermaid diagram rendering in fenced code blocks.

### Content

- `content/docs/` — Main documentation (260+ markdown files across 36+ subdirectories).
- `content/posts/`, `content/products/`, `content/solutions/` — Blog, product, and solution pages.
- Front matter uses YAML with `id`, `title`, `weight` (for ordering), and optional `slug`.
- `_index.md` files are required for Hugo section pages (not `index.md`).

### Sidebar Navigation

- `data/sidebar.yml` — Central navigation config. Supports three item types: `header`, `doc`, and `category`.
- Categories with `autogenerated: true` pull child pages from the filesystem.
- Categories can also manually list nested `items`.

### Asset Pipeline

- **SCSS**: `assets/css/main.scss` imports component SCSS files and defines CSS custom properties (using `--ifm-*` naming from Docusaurus migration). Built by Hugo's libsass with `open-color` include path.
- **JavaScript**: `assets/js/main.mjs` is the entry point. Hugo's `js.Build` bundles, minifies, and fingerprints it. Uses Swup for page transitions, Mermaid for diagrams.
- **Icons**: Tabler icons are mounted from `node_modules/@tabler/icons/icons` to `assets/icons/tabler` via Hugo module mounts in `hugo.toml`.

### Node Module Mounts

Hugo mounts specific node_modules into the asset pipeline (configured in `hugo.toml`):
- `@tabler/icons` → `assets/icons/tabler`
- `mermaid/dist` → `assets/js/vendor/mermaid`
- `swup/dist` → `assets/js/vendor/swup`

### Prettier Config

Configured in `package.json`: `printWidth: 160`, `singleQuote: true`, `trailingComma: "es5"`.
